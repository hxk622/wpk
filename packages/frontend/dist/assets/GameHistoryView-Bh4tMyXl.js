import{_ as C,r as p,o as x,c as i,a as l,b as s,d as r,C as V,B,F as H,f as D,w as G,s as L,g as N,h as n,t as a,D as u,j as z}from"./index-DuysnCwA.js";import{u as S}from"./user-aMWrx1op.js";import{g as T}from"./game-CbA6aoiT.js";import{l as y}from"./logger-BnKYzyre.js";import"./axios-DCPBCOZw.js";const W={class:"game-history"},F={class:"history-container"},I={class:"history-list"},j={class:"game-info"},A={class:"game-title"},E={class:"game-id"},M={class:"game-date"},P={class:"game-details"},R={class:"detail-item"},U={class:"detail-value"},q={class:"detail-item"},J={class:"detail-value"},K={class:"detail-item"},O={key:1,class:"empty-state"},Q={key:2,class:"error-state"},X={__name:"GameHistoryView",setup(Y){const f=N();S();const c=p([]),d=p(!0),_=p(null),h=()=>{f.back()},g=e=>new Date(e).toLocaleString(),v=async()=>{d.value=!0,_.value=null;try{y.info("正在加载游戏历史记录");const e=await T.getGameHistory();e&&e.history&&(c.value=e.history)}catch(e){y.error("加载游戏历史记录失败:",e),_.value=e,L("加载游戏历史记录失败")}finally{d.value=!1}};return x(()=>{v()}),(e,o)=>{const k=r("van-nav-bar"),b=r("van-loading"),m=r("van-empty"),w=r("van-button");return n(),i("div",W,[l(k,{title:"游戏历史","left-text":"返回","left-arrow":"",onClickLeft:h}),s("div",F,[s("div",I,[(n(!0),i(H,null,D(c.value,t=>(n(),i("div",{class:"history-item",key:t.id},[s("div",j,[s("div",A,[s("span",E,"房间: "+a(t.roomId),1),s("span",M,a(g(t.endTime)),1)]),s("div",P,[s("div",R,[o[0]||(o[0]=s("span",{class:"detail-label"},"玩家数:",-1)),s("span",U,a(t.players.length),1)]),s("div",q,[o[1]||(o[1]=s("span",{class:"detail-label"},"底池:",-1)),s("span",J,a(t.totalPot)+" 筹码",1)]),s("div",K,[o[2]||(o[2]=s("span",{class:"detail-label"},"我的盈利:",-1)),s("span",{class:u(["detail-value",{win:t.profit>0,lose:t.profit<0}])},a(t.profit>0?"+":"")+a(t.profit)+" 筹码 ",3)])])]),s("div",{class:u(["game-result",{win:t.isWinner,lose:!t.isWinner}])},a(t.isWinner?"胜利":"失败"),3)]))),128))]),d.value?(n(),V(b,{key:0,class:"loading",size:"40px"})):c.value.length===0?(n(),i("div",O,[l(m,{description:"暂无游戏历史记录"})])):_.value?(n(),i("div",Q,[l(m,{description:"获取游戏历史失败"}),l(w,{type:"primary",size:"small",onClick:v},{default:G(()=>[...o[3]||(o[3]=[z("重试",-1)])]),_:1})])):B("",!0)])])}}},os=C(X,[["__scopeId","data-v-d1281bea"]]);export{os as default};
